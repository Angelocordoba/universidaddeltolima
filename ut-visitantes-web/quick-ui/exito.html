<!doctype html>
<html>
<head><meta charset="utf-8"><title>Registro Exitoso</title><link rel="stylesheet" href="styles.css"></head>
<body>
  <div class="container center" style="flex-direction:column">
    <h1>Registro Exitoso</h1>
    <div id="info" class="card center" style="flex-direction:column;gap:8px"></div>
    <p class="small">Puede mostrar el QR en su celular al ingresar.</p>
    <a href="index.html"><button class="secondary">Volver</button></a>
  </div>

<script>
const API_BASE = "https://universidaddeltolima.onrender.com";
const params = new URLSearchParams(location.search);
const id = params.get('id');
const info = document.getElementById('info');

if (!id) info.innerHTML = '<p>No hay id.</p>';
else {
  info.innerHTML = '<p>Cargando...</p>';
  // Llamada opcional para obtener datos del preregistro si tu backend tiene endpoint
  fetch(`${API_BASE}/api/preregistros/${id}`).then(r=>r.json()).then(d=>{
    if (d.error) { info.innerHTML = `<p>Error: ${d.error}</p>`; return; }
    info.innerHTML = `<p><strong>${d.nombre}</strong></p>
      <p>ID: ${id}</p>
      ${d.qr ? `<img src="${d.qr}" class="qr" />` : '<p class="small">QR no disponible</p>'}`;
  }).catch(()=>{ info.innerHTML = `<p>Registrado correctamente. ID: ${id}</p>` });
}
</script>
</body>
</html>
